generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Processo {
  id                 Int    @id @default(autoincrement())
  numero             String @unique
  dataCriacao        DateTime
  requerente         String?
  
  formaEntradaId     Int
  formaEntrada       FormaEntrada @relation(fields: [formaEntradaId], references: [id])

  responsavelId      Int
  responsavel        Responsavel @relation(fields: [responsavelId], references: [id])

  requeridoId        Int?
  requerido         Requerido? @relation(fields: [requeridoId], references: [id])

  situacaoId         Int
  situacao          Situacao @relation(fields: [situacaoId], references: [id])

  encaminhamentoId   Int
  encaminhamento    Encaminhamento @relation(fields: [encaminhamentoId], references: [id])

  pedidoManifestacaoId Int?
  pedidoManifestacao PedidoManifestacao? @relation(fields: [pedidoManifestacaoId], references: [id])

  contatoPrevioId    Int?
  contatoPrevio     ContatoPrevio? @relation(fields: [contatoPrevioId], references: [id])

  evidenciaId        Int?
  evidencia         Evidencia? @relation(fields: [evidenciaId], references: [id])
}

model FormaEntrada {
  id        Int     @id @default(autoincrement())
  nome      String  @unique
  processos Processo[]
}

model Responsavel {
  id        Int     @id @default(autoincrement())
  nome      String  @unique
  processos Processo[]
}

model Requerido {
  id        Int     @id @default(autoincrement())
  nome      String  @unique
  cnpj      String?
  cnae      String?
  site      String?
  email     String?
  setorId   Int?
  setor     Setor? @relation(fields: [setorId], references: [id])
  processos Processo[]
}

model Setor {
  id        Int     @id @default(autoincrement())
  nome      String  @unique
  requeridos Requerido[]
}

model Situacao {
  id        Int     @id @default(autoincrement())
  nome      String  @unique
  processos Processo[]
}

model Encaminhamento {
  id        Int     @id @default(autoincrement())
  nome      String  @unique
  processos Processo[]
}

model PedidoManifestacao {
  id        Int     @id @default(autoincrement())
  nome      String  @unique
  processos Processo[]
}

model ContatoPrevio {
  id        Int     @id @default(autoincrement())
  nome      String  @unique
  processos Processo[]
}

model Evidencia {
  id        Int     @id @default(autoincrement())
  nome      String  @unique
  processos Processo[]
}
